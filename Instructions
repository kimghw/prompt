# 프로젝트 관리 작업 지시사항 (개정판)
(매우매우 중요)
## 자주 위반하는 항목 ##
- **pydantic2 사용**
- **하나의 파일이 커지지 않도록(350줄 초과 금지)** (초과 시 클래스 분리)
- **패키지 관리: uv 사용**
- **db 및 외부 API 사용 시 반드시 CONTEXT7 또는 웹사이트를 검색 후 맞는 버전 또는 최신 버전 사용**
- ** 데이터 형식 검증 및 json 오류 검증**
- **단위테스트, 통합테스트는 하지 않음**
- **단위테스트, 통합테스트는 하지 않음**
- **/test/senario 에 명시된 시나리오에 따라서만 테스트 진행

(프로젝트 기능 추기/변경시)
## cline/system 확인 선행 작업
- **변경하고자 하는 유즈케이스가 무엇인지 확인
- **현재 유즈케이스의 스택 호출 다이어 그램 제시(해당 레이어 포함) 
- **변경 계획을 스택 호출 다이어 그램으로 제시(해당 레이어 포함)
- **상세 변경 중 사용자에게 요청할 게 있으면 물어보고 답을 받음 

(상시 반영)
## 🚨 핵심 원칙 (상시 준수)
### 1. 작업 시 필수 체크리스트
- **사용자가 요청한 기능만 구현** (추가 기능 구현 금지)
- **에러 수정 시 해당 모듈만 컨텍스트 윈도우에 로드**
- **모든 변경사항은 productContext.md에 즉시 기록**
- **터미널 에러 발생 시 완전히 해결 후 task 종료**
- **파일당 350줄 초과 금지** (초과 시 클래스 분리)

### 2. 코드 작성 규칙
- **비동기 함수는 반드시 await 처리**
- **메서드 시그니처 일치 여부 확인**
- **API 응답 형식 검증 후 사용**
- **로그 기록으로 코드 흐름 추적**
- **외부 라이브러리/API 사용 시 공식 문서 참조**

### 3. 프로젝트 구조 규칙
- **패키지 관리: uv 사용**
- **환경 변수: .env 파일에 저장**
- **테스트 코드: 별도 tests/ 폴더에서 관리**
- **가상환경: 프로젝트명으로 생성, .gitignore에 추가**

(사용자 요청 시)
## 📁 /docs 문서 관리
## /src 폴더만 참조 ## ## /src 폴더만 참조 ## ## /src 폴더만 참조 ##
### 1. /docs/events 에 각 파일로 관리
- ** 이벤트 파리미터 및 데이터 표맷
- ** 이벤트 핸들러 및 이벤트 프로세스 파이프라인(플로우 차트나 다이어 그림 추가)
- ** kafka 설정, 토픽, 이벤트 타입
- ** 토픽 별 컨슈머 가이드라인
## 2. /docs/usecase-{name or 유즈케이스 id}(컴포짓 유즈케이스)
- ** 각 컴포짓 유즈케이스 마다 작성
- ** 개요, 아케택쳐, 스택호출 흐름도(플로우 차트나 다이어 그림 추가)
- ** 스택 호출 흐름도에서 각 호출/반환 포맷 형식, 이벤트 발생/구독 여부
- ** 세부 함수/기능 설명 포함
## 3. /docs/tests
- ** 테스트 환경(가상 데이터베이스, 가상 이벤트서버, 가상 API)

(사용자 요청 시)
## 📁 /scripts 지침
### 1. /scripts
- ** scripts 파일을 활용하기 위해서 alias 관리
- ** uv 프로젝트로 관리
### 2. /scripts/events
- ** /src 폴더의 구현체만 사용
- ** kafka 서버의 토픽 리스트 확인(도커 명령어 사용)
- ** Kafka 메시지 포맷팅 및 조회 스크립트(도커 명령어 사용)
- ** (요청시) send_{topic_name}_topic_event  형식으로 보내는 토픽
### 3. /scripts/externals
- ** 데이터 베이스 및 캐시 관련 실행 여부 확인 및 실행
- ** 이벤트 및 관련 기능 실행 여부 확인 및 실행
- ** 모든 서비스 중지
- ** 모든 서비스 재식작
- ** 모든 서비스 상태 확인 스크립트 

(사용자 요청 시)
## 📁 .MemoryBank 관리 지침
### 필수 파일 및 업데이트 시점
1. **use_scenarios.md** (사용자 요청 시마다)
   - 최신 요구사항만 반영
   - 변경사항은 [ ] 표시
   - 새로운 유즈케이스 제안 (시스템 미반영 표기)
2. **productContext.md** (에러 발생/해결 시)
   - 에러 내용 및 해결방법
   - 모듈 간 입출력 변경사항
   - 예방조치 방법
3. **taskContext.md** (작업 완료 시)
   - task별 진행사항
   - 주요 이슈 및 해결과정
4. **progressandTODO.md** (10분 이상 대기 또는 작업 완료 시)
   - 현재 진행상황
   - 다음 작업 목록
5. **techContext.md** (기술스택 변경 시)
   - 변경된 기술스택 업데이트
   - 외부 API/DB 사용지침은 .MemoryBank/reference/에 저장
6. **projectbrief.md** (프로젝트 목표 변경 시)
   - 핵심 요구사항 및 목표
7. **systemPatterns.md** (아키텍처 변경 시)
   - 프로젝트 아키텍처
   - 클래스 다이어그램


- **작업 순서 엄격히 준수**

